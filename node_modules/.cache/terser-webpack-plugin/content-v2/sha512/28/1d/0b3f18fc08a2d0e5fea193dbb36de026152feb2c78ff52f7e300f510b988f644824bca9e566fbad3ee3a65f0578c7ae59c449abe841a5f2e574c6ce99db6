{"code":"(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},66:function(e,t,n){\"use strict\";n.r(t);var a=n(1),c=n.n(a),r=n(29),s=n.n(r),i=(n(36),n(37),n(14)),o=n(2),l=n(8),u=n(9),f=n(11),h=n(10);function j(e,t,n){if(e>255||t>255||n>255)throw\"Invalid color component\";return(e<<16|t<<8|n).toString(16)}var d=n(17),v=n.n(d),b=n(30),p=n(18),g=n.n(p);function O(){return(O=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return\"/api/generate/kat\",e.next=3,g.a.get(\"/api/generate/kat\");case 3:return t=e.sent,console.log(\"generate cat response status\",t.status),e.abrupt(\"return\",t.data);case 6:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}var m=n(0),x=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).canvasRef=c.a.createRef(),a.imgRef=c.a.createRef(),a.state={file:\"\",imagePreviewUrl:\"\",colorMap:{},placement:\"\",subType:\"\"},a}return Object(u.a)(n,[{key:\"componentDidMount\",value:function(){this.imgRef}},{key:\"_generateCanvas\",value:function(){var e=this;return Object(m.jsx)(\"div\",{children:Object(m.jsx)(\"canvas\",{onMouseMove:function(t){return e._handleFindPosition(t)},ref:this.canvasRef,width:240,height:240})})}},{key:\"_scanCanvas\",value:function(){var e=this.canvasRef,t={};(function(e){for(var t=function(e){for(var t=[],n=0;n<e;n++)t.push([]);return t}(24),n=e.getContext(\"2d\"),a=0;a<24;a++)for(var c=0;c<24;c++){var r=10*c,s=10*a,i=n.getImageData(r,s,9,9).data,o=\"#\"+(\"000000\"+j(i[0],i[1],i[2])).slice(-6);switch(o){case\"#000000\":t[a][c]=\"outline\";break;case\"#ffffff\":t[a][c]=\"empty\";break;default:t[a][c]=\"color_\".concat(o)}}return t})(e.current).forEach((function(e,n){t[n]=e})),this.setState({colorMap:t}),console.log(t)}},{key:\"_saveAccessory\",value:function(){\"\"!==this.state.placement&&\"\"!==this.state.subtype&&this.state.colorMap!=={}?function(e,t,n){var a=\"\".concat(\"\",\"/accessory/create\");window.confirm(\"Are you sure you eant to save this accessory as sub type \".concat(t,\" and placement \").concat(e))&&g.a.post(a,{placement:e,subType:t,accessory:n})}(this.state.placement,this.state.subType,this.state.colorMap):alert(\"unable to save accessory plz review configuration\")}},{key:\"_handlePlacementChange\",value:function(e){this.setState({placement:e.target.value})}},{key:\"_handleSubTypeChange\",value:function(e){this.setState({subType:e.target.value})}},{key:\"_handleSubmit\",value:function(e){e.preventDefault(),console.log(\"handle uploading-\",this.state.file)}},{key:\"_handleFindPosition\",value:function(e){var t=this.canvasRef,n=t.current.getContext(\"2d\"),a=function(e){var t=0,n=0;if(e.offsetParent){do{t+=e.offsetLeft,n+=e.offsetTop}while(e=e.offsetParent);return{x:t,y:n}}}(t.current),c=e.pageX-a.x,r=e.pageY-a.y,s=n.getImageData(c,r,10,10).data,i=\"#\"+(\"000000\"+j(s[0],s[1],s[2])).slice(-6);console.log(i)}},{key:\"_handleImageChange\",value:function(e){var t=this;e.preventDefault();var n=new FileReader,a=e.target.files[0];n.onloadstart=function(e){t.canvasRef.current.getContext(\"2d\").clearRect(0,0,240,240)},n.onloadend=function(e){t.setState({file:a,imagePreviewUrl:n.result,colorMap:{},placement:\"\",subType:\"\"});var c=new Image;c.onload=function(e){var n=t.canvasRef.current.getContext(\"2d\");n.fillStyle=\"white\",n.fillRect(0,0,240,240),n.drawImage(c,0,0,240,240)},c.src=t.state.imagePreviewUrl},n.readAsDataURL(a)}},{key:\"render\",value:function(){var e=this,t=this.state.imagePreviewUrl,n=null;return t?Object(m.jsxs)(\"div\",{className:\"previewComponent\",children:[Object(m.jsx)(\"form\",{onSubmit:function(t){return e._handleSubmit(t)},children:Object(m.jsx)(\"input\",{className:\"fileInput\",type:\"file\",onChange:function(t){return e._handleImageChange(t)}})}),Object(m.jsx)(\"div\",{className:\"imgPreview\",children:Object(m.jsx)(\"img\",{ref:this.imgRef,height:240,width:240,alt:\"img\",src:t})}),Object(m.jsx)(\"br\",{}),Object(m.jsx)(\"h4\",{children:\"Canvas\"}),this._generateCanvas(),Object(m.jsx)(\"br\",{}),Object(m.jsx)(\"button\",{onClick:function(){return e._scanCanvas()},children:\"scan\"}),Object(m.jsx)(\"br\",{}),Object(m.jsxs)(\"form\",{id:\"save-accessory\",children:[Object(m.jsx)(\"label\",{children:\"enter subtype\"}),Object(m.jsx)(\"input\",{className:\"subtype-input\",type:\"text\",value:this.state.subType,onChange:function(t){return e._handleSubTypeChange(t)}}),Object(m.jsx)(\"br\",{}),Object(m.jsx)(\"label\",{children:\"choose placement\"}),Object(m.jsxs)(\"select\",{value:this.state.placement,onChange:function(t){return e._handlePlacementChange(t)},children:[Object(m.jsx)(\"option\",{value:\"\",children:\"Select your option\"}),[\"top\",\"mid\",\"bottom\",\"custom\"].map((function(e,t){return Object(m.jsx)(\"option\",{value:e,children:e},\"\".concat(t,\"_option\"))}))]})]}),Object(m.jsx)(\"button\",{onClick:function(t){return e._saveAccessory(t)},children:\"Save Accessory\"})]}):(n=Object(m.jsx)(\"div\",{className:\"previewText\",children:\"Please select an Image for Preview\"}),Object(m.jsxs)(\"div\",{className:\"previewComponent\",children:[Object(m.jsx)(\"form\",{onSubmit:function(t){return e._handleSubmit(t)},children:Object(m.jsx)(\"input\",{className:\"fileInput\",type:\"file\",onChange:function(t){return e._handleImageChange(t)}})}),Object(m.jsx)(\"div\",{className:\"imgPreview\",children:n}),Object(m.jsx)(\"h4\",{children:\"Canvas\"}),this._generateCanvas()]}))}}]),n}(c.a.Component),y=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:\"render\",value:function(){return Object(m.jsxs)(\"div\",{children:[Object(m.jsx)(\"h1\",{children:\"Create Accessory\"}),Object(m.jsx)(x,{})]})}}]),n}(c.a.Component);function C(e,t){if(!e)return[];for(var n={empty:\"#ffffff\",outline:\"#000000\"},a=t,c=0;c<24;c++){e[c].forEach((function(e){if(a.length||n.hasOwnProperty(e)||(n[e]=\"#\".concat(Math.floor(16777215*Math.random()).toString(16))),n.hasOwnProperty(e));else{var t=k(a);n[e]=\"#\".concat(a[t]),a.splice(t,1)}}))}return function(e,t){for(var n=[],a=0;a<24;a++){var c=e[a].map((function(e){return t[e]}));n.push(c)}return n}(e,n)}function k(e){var t=e.length;return Math.floor(Math.random()*t)}function w(e,t){if(t.length<24)return e;for(var n=e,a=0;a<e.length;a++)for(var c=0;c<e.length;c++)\"#ffffff\"!=t[a][c]&&(n[a][c]=t[a][c]);return n}var _=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).canvasRef=c.a.createRef(),a.state={Face:{},Accessories:{},Background:{},Merged:null,ImgData:null},a}return Object(u.a)(n,[{key:\"_generateKat\",value:function(e){var t=this;e.preventDefault(),function(){return O.apply(this,arguments)}().then((function(e){console.log(\"data in promise\",e),t.setState({Face:e.face,Accessories:e.accessories,Background:e.background});var n=C(t.state.Face.face.Face,t.state.Face.palette.palette),a=function(e){for(var t=[],n=0;n<24;n++)t.push(e[n]);return t}(t.state.Background.background.Background),c={};Object.keys(t.state.Accessories).forEach((function(e){t.state.Accessories[e]&&(c[e]=C(t.state.Accessories[e].accessory.accessory,t.state.Accessories[e].palette.palette))}));var r=w(a,n),s=Object.values(c).reduce((function(e,t){return w(e,t)})),i=w(r,s);!function(e,t){for(var n=0;n<24;n++)for(var a=0;a<24;a++){\"#ffffff\"===e[n][a]?t.fillStyle=\"#ffffff\":t.fillStyle=e[n][a];var c=10*a,r=10*n;t.fillRect(c,r,10,10)}}(i,t.canvasRef.current.getContext(\"2d\"));var o=t.canvasRef.current.toDataURL(\"image/png\");console.log(\"converted image data\",o),t.setState({Merged:i,ImgData:o})}))}},{key:\"_generateCanvas\",value:function(){return Object(m.jsx)(\"div\",{children:Object(m.jsx)(\"canvas\",{ref:this.canvasRef,width:240,height:240})})}},{key:\"render\",value:function(){var e=this;return Object(m.jsxs)(\"div\",{children:[Object(m.jsx)(\"button\",{onClick:function(t){return e._generateKat(t)},children:\"Generate Kat\"}),this._generateCanvas(),Object(m.jsx)(\"br\",{}),this.state.Merged&&this.state.ImgData?Object(m.jsx)(\"a\",{href:this.state.ImgData,download:!0,children:\"Download Kat\"}):null]})}}]),n}(c.a.Component),R=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:\"render\",value:function(){return Object(m.jsxs)(\"div\",{children:[Object(m.jsx)(\"h1\",{children:\"Generate Kat\"}),Object(m.jsx)(_,{})]})}}]),n}(c.a.Component);function S(){return Object(m.jsx)(\"h2\",{children:\"Home\"})}var P=function(){return Object(m.jsx)(i.a,{children:Object(m.jsxs)(\"div\",{children:[Object(m.jsx)(\"nav\",{children:Object(m.jsxs)(\"ul\",{children:[Object(m.jsx)(\"li\",{children:Object(m.jsx)(i.b,{to:\"/\",children:\"Home\"})}),Object(m.jsx)(\"li\",{children:Object(m.jsx)(i.b,{to:\"/create/accessory\",children:\"Create Accessory\"})}),Object(m.jsx)(\"li\",{children:Object(m.jsx)(i.b,{to:\"/generate/kat\",children:\"Create Kat\"})})]})}),Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{path:\"/generate/kat\",children:Object(m.jsx)(R,{})}),Object(m.jsx)(o.a,{path:\"/create/accessory\",children:Object(m.jsx)(y,{})}),Object(m.jsx)(o.a,{path:\"/\",children:Object(m.jsx)(S,{})})]})]})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById(\"root\")),I()}},[[66,1,2]]]);","name":"static/js/main.9011ba5a.chunk.js","map":{"version":3,"sources":["static/js/main.9011ba5a.chunk.js"],"names":["this","push","36","module","exports","__webpack_require__","37","66","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","react_router_dom","react_router","classCallCheck","createClass","inherits","createSuper","rgbToHex","g","b","toString","regenerator","regenerator_default","asyncToGenerator","axios","axios_default","_getKatData","Object","a","mark","_callee","response","wrap","_context","prev","next","get","sent","console","log","status","abrupt","data","stop","apply","arguments","jsx_runtime","upload_Uploader","_React$Component","Uploader","_super","props","_this","call","canvasRef","createRef","imgRef","state","file","imagePreviewUrl","colorMap","placement","subType","key","value","_this2","children","onMouseMove","e","_handleFindPosition","ref","width","height","canvas","mapping","colorMatrix","m","i","buildEmptyMatrix","context","getContext","index","w","h","p","getImageData","hex","slice","concat","recordMappingMatrix","current","forEach","row","setState","subtype","aData","url","window","confirm","post","accessory","postAccessoryData","alert","target","preventDefault","ctx","pos","obj","curleft","curtop","offsetParent","offsetLeft","offsetTop","x","y","findPosition","pageX","pageY","_this3","reader","FileReader","files","onloadstart","clearRect","onloadend","result","Image","onload","fillStyle","fillRect","drawImage","src","readAsDataURL","_this4","$imagePreview","className","onSubmit","_handleSubmit","type","onChange","_handleImageChange","alt","_generateCanvas","onClick","_scanCanvas","id","_handleSubTypeChange","_handlePlacementChange","map","el","_saveAccessory","Component","CreateAccessory_CreateAccessory","CreateAccessory","applyColorPalette","palette","paletteMap","empty","outline","paletteCopy","length","hasOwnProperty","Math","floor","random","rIndex","getRandomColorFromPalette","splice","pMap","final","transformRow","applyColorMap","mergeLayers","source","edit","start","j","generate_Generator","Generator","Face","Accessories","Background","Merged","ImgData","getKatData","then","face","background","bg","getBackgroundColorMap","aGroup","keys","base","values","reduce","acc","curr","combo","canvasContext","redrawFromMatrix","imgData","toDataURL","_generateKat","href","download","GenerateKat_GenerateKat","GenerateKat","Home","src_App","to","path","src_reportWebVitals","onPerfEntry","Function","bind","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpfrontend\"] = this[\"webpackJsonpfrontend\"] || []).push([[0],{\n\n/***/ 36:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 66:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(29);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(36);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(37);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(14);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/inherits.js + 1 modules\nvar inherits = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createSuper.js + 5 modules\nvar createSuper = __webpack_require__(10);\n\n// CONCATENATED MODULE: ./src/util/accessory-helpers.js\nfunction findPosition(obj){var curleft=0,curtop=0;if(obj.offsetParent){do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop;}while(obj=obj.offsetParent);return{x:curleft,y:curtop};}return undefined;}function rgbToHex(r,g,b){if(r>255||g>255||b>255)throw\"Invalid color component\";return(r<<16|g<<8|b).toString(16);}function buildEmptyMatrix(height){var m=[];for(var i=0;i<height;i++){m.push([]);}return m;}function recordMappingMatrix(canvas){var colorMatrix=buildEmptyMatrix(24);var context=canvas.getContext('2d');for(var height=0;height<24;height++){for(var index=0;index<24;index++){var w=index*10;var h=height*10;var p=context.getImageData(w,h,9,9).data;var hex=\"#\"+(\"000000\"+rgbToHex(p[0],p[1],p[2])).slice(-6);switch(hex){case\"#000000\":colorMatrix[height][index]=\"outline\";break;case\"#ffffff\":colorMatrix[height][index]=\"empty\";break;default:colorMatrix[height][index]=\"color_\".concat(hex);break;}}}return colorMatrix;}\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(17);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(30);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(18);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./src/util/dao.js\nvar SERVER_URL_BASE=\"\";function postAccessoryData(placement,subType,aData){var url=\"\".concat(SERVER_URL_BASE,\"/accessory/create\");if(window.confirm(\"Are you sure you eant to save this accessory as sub type \".concat(subType,\" and placement \").concat(placement))){axios_default.a.post(url,{placement:placement,subType:subType,accessory:aData});}}function getKatData(){return _getKatData.apply(this,arguments);}function _getKatData(){_getKatData=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var url,response;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"/api/generate/kat\";_context.next=3;return axios_default.a.get(url);case 3:response=_context.sent;console.log(\"generate cat response status\",response.status);return _context.abrupt(\"return\",response.data);case 6:case\"end\":return _context.stop();}}},_callee);}));return _getKatData.apply(this,arguments);}\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/components/upload.js\nvar upload_Uploader=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Uploader,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Uploader);function Uploader(props){var _this;Object(classCallCheck[\"a\" /* default */])(this,Uploader);_this=_super.call(this,props);_this.canvasRef=/*#__PURE__*/react_default.a.createRef();_this.imgRef=/*#__PURE__*/react_default.a.createRef();_this.state={file:'',imagePreviewUrl:'',colorMap:{},placement:'',subType:''};return _this;}Object(createClass[\"a\" /* default */])(Uploader,[{key:\"componentDidMount\",value:function componentDidMount(){var img=this.imgRef;}},{key:\"_generateCanvas\",value:function _generateCanvas(){var _this2=this;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"canvas\",{onMouseMove:function onMouseMove(e){return _this2._handleFindPosition(e);},ref:this.canvasRef,width:240,height:240})});}},{key:\"_scanCanvas\",value:function _scanCanvas(){var canvas=this.canvasRef;var mapping={};var matrix=recordMappingMatrix(canvas.current);matrix.forEach(function(row,index){mapping[index]=row;});this.setState({colorMap:mapping});console.log(mapping);}},{key:\"_saveAccessory\",value:function _saveAccessory(){if(this.state.placement!==\"\"&&this.state.subtype!==\"\"&&this.state.colorMap!=={}){postAccessoryData(this.state.placement,this.state.subType,this.state.colorMap);}else{alert(\"unable to save accessory plz review configuration\");}}},{key:\"_handlePlacementChange\",value:function _handlePlacementChange(e){this.setState({placement:e.target.value});}},{key:\"_handleSubTypeChange\",value:function _handleSubTypeChange(e){this.setState({subType:e.target.value});}},{key:\"_handleSubmit\",value:function _handleSubmit(e){e.preventDefault();// TODO: do something with -> this.state.file\nconsole.log('handle uploading-',this.state.file);}},{key:\"_handleFindPosition\",value:function _handleFindPosition(e){var canvas=this.canvasRef;var ctx=canvas.current.getContext(\"2d\");var pos=findPosition(canvas.current);var x=e.pageX-pos.x;var y=e.pageY-pos.y;var p=ctx.getImageData(x,y,10,10).data;var hex=\"#\"+(\"000000\"+rgbToHex(p[0],p[1],p[2])).slice(-6);console.log(hex);}},{key:\"_handleImageChange\",value:function _handleImageChange(e){var _this3=this;e.preventDefault();var reader=new FileReader();var file=e.target.files[0];reader.onloadstart=function(e){var ctx=_this3.canvasRef.current.getContext(\"2d\");ctx.clearRect(0,0,240,240);};reader.onloadend=function(e){_this3.setState({file:file,imagePreviewUrl:reader.result,colorMap:{},placement:\"\",subType:\"\"});var i=new Image();i.onload=function(e){var ctx=_this3.canvasRef.current.getContext(\"2d\");ctx.fillStyle='white';ctx.fillRect(0,0,240,240);ctx.drawImage(i,0,0,240,240);};i.src=_this3.state.imagePreviewUrl;};reader.readAsDataURL(file);}},{key:\"render\",value:function render(){var _this4=this;var imagePreviewUrl=this.state.imagePreviewUrl;var $imagePreview=null;if(imagePreviewUrl){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"previewComponent\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"form\",{onSubmit:function onSubmit(e){return _this4._handleSubmit(e);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"fileInput\",type:\"file\",onChange:function onChange(e){return _this4._handleImageChange(e);}})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"imgPreview\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{ref:this.imgRef,height:240,width:240,alt:\"img\",src:imagePreviewUrl})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Canvas\"}),this._generateCanvas(),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:function onClick(){return _this4._scanCanvas();},children:\"scan\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{id:\"save-accessory\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{children:\"enter subtype\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"subtype-input\",type:\"text\",value:this.state.subType,onChange:function onChange(e){return _this4._handleSubTypeChange(e);}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\",{children:\"choose placement\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{value:this.state.placement,onChange:function onChange(e){return _this4._handlePlacementChange(e);},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"\",children:\"Select your option\"}),[\"top\",\"mid\",\"bottom\",\"custom\"].map(function(el,i){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:el,children:el},\"\".concat(i,\"_option\"));})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:function onClick(e){return _this4._saveAccessory(e);},children:\"Save Accessory\"})]});}else{$imagePreview=/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"previewText\",children:\"Please select an Image for Preview\"});return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"previewComponent\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"form\",{onSubmit:function onSubmit(e){return _this4._handleSubmit(e);},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"fileInput\",type:\"file\",onChange:function onChange(e){return _this4._handleImageChange(e);}})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"imgPreview\",children:$imagePreview}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:\"Canvas\"}),this._generateCanvas()]});}}}]);return Uploader;}(react_default.a.Component);\n// CONCATENATED MODULE: ./src/routes/CreateAccessory.js\nvar CreateAccessory_CreateAccessory=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(CreateAccessory,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(CreateAccessory);function CreateAccessory(){Object(classCallCheck[\"a\" /* default */])(this,CreateAccessory);return _super.apply(this,arguments);}Object(createClass[\"a\" /* default */])(CreateAccessory,[{key:\"render\",value:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Create Accessory\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(upload_Uploader,{})]});}}]);return CreateAccessory;}(react_default.a.Component);\n// CONCATENATED MODULE: ./src/util/generator-helper.js\nfunction applyColorPalette(mapping,palette){if(!mapping){return[];}var paletteMap={};paletteMap[\"empty\"]=\"#ffffff\";paletteMap[\"outline\"]=\"#000000\";var paletteCopy=palette;var colorMapping=[];for(var i=0;i<24;i++){var currentRow=mapping[i];currentRow.forEach(function(el){if(!paletteCopy.length&&!paletteMap.hasOwnProperty(el)){paletteMap[el]=\"#\".concat(Math.floor(Math.random()*16777215).toString(16));}if(paletteMap.hasOwnProperty(el)){}else{var rIndex=getRandomColorFromPalette(paletteCopy);paletteMap[el]=\"#\".concat(paletteCopy[rIndex]);paletteCopy.splice(rIndex,1);}});}colorMapping=applyColorMap(mapping,paletteMap);return colorMapping;}function getRandomColorFromPalette(palette){var length=palette.length;return Math.floor(Math.random()*length);}function applyColorMap(map,pMap){var final=[];for(var i=0;i<24;i++){var transformRow=map[i].map(function(el){return pMap[el];});final.push(transformRow);}return final;}function getBackgroundColorMap(bg){var mapping=[];for(var i=0;i<24;i++){mapping.push(bg[i]);}return mapping;}function mergeLayers(source,edit){if(edit.length<24){return source;}var start=source;for(var index=0;index<source.length;index++){for(var j=0;j<source.length;j++){if(edit[index][j]==\"#ffffff\"){continue;}else{start[index][j]=edit[index][j];}}}return start;}function redrawFromMatrix(colorMatrix,canvasContext){for(var height=0;height<24;height++){for(var index=0;index<24;index++){if(colorMatrix[height][index]===\"#ffffff\"){canvasContext.fillStyle=\"#ffffff\";}else{canvasContext.fillStyle=colorMatrix[height][index];}var w=index*10;var h=height*10;canvasContext.fillRect(w,h,10,10);}}}\n// CONCATENATED MODULE: ./src/components/generate.js\nvar generate_Generator=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(Generator,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(Generator);function Generator(props){var _this;Object(classCallCheck[\"a\" /* default */])(this,Generator);_this=_super.call(this,props);_this.canvasRef=/*#__PURE__*/react_default.a.createRef();_this.state={Face:{},Accessories:{},Background:{},Merged:null,ImgData:null};return _this;}Object(createClass[\"a\" /* default */])(Generator,[{key:\"_generateKat\",value:function _generateKat(e){var _this2=this;e.preventDefault();var data=getKatData();data.then(function(r){console.log(\"data in promise\",r);_this2.setState({Face:r[\"face\"],Accessories:r[\"accessories\"],Background:r[\"background\"]});var face=applyColorPalette(_this2.state.Face[\"face\"][\"Face\"],_this2.state.Face[\"palette\"][\"palette\"]);var background=getBackgroundColorMap(_this2.state.Background[\"background\"][\"Background\"]);var aGroup={};// console.log('state accessories', Object.keys(this.state.Accessories))\nObject.keys(_this2.state.Accessories).forEach(function(placement){if(_this2.state.Accessories[placement]){// console.log(this.state.Accessories[placement][\"accessory\"][\"accessory\"]);\n// console.log(this.state.Accessories[placement][\"palette\"][\"palette\"]);\naGroup[placement]=applyColorPalette(_this2.state.Accessories[placement][\"accessory\"][\"accessory\"],_this2.state.Accessories[placement][\"palette\"][\"palette\"]);}});// console.log(\"formatted accessories\", aGroup);\nvar base=mergeLayers(background,face);var a=Object.values(aGroup).reduce(function(acc,curr){return mergeLayers(acc,curr);});var combo=mergeLayers(base,a);redrawFromMatrix(combo,_this2.canvasRef.current.getContext(\"2d\"));var imgData=_this2.canvasRef.current.toDataURL(\"image/png\");console.log(\"converted image data\",imgData);_this2.setState({Merged:combo,ImgData:imgData});});}},{key:\"_generateCanvas\",value:function _generateCanvas(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"canvas\",{ref:this.canvasRef,width:240,height:240})});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:function onClick(e){return _this3._generateKat(e);},children:\"Generate Kat\"}),this._generateCanvas(),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\",{}),this.state.Merged&&this.state.ImgData?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:this.state.ImgData,download:true,children:\"Download Kat\"}):null]});}}]);return Generator;}(react_default.a.Component);\n// CONCATENATED MODULE: ./src/routes/GenerateKat.js\nvar GenerateKat_GenerateKat=/*#__PURE__*/function(_React$Component){Object(inherits[\"a\" /* default */])(GenerateKat,_React$Component);var _super=Object(createSuper[\"a\" /* default */])(GenerateKat);function GenerateKat(){Object(classCallCheck[\"a\" /* default */])(this,GenerateKat);return _super.apply(this,arguments);}Object(createClass[\"a\" /* default */])(GenerateKat,[{key:\"render\",value:function render(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Generate Kat\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(generate_Generator,{})]});}}]);return GenerateKat;}(react_default.a.Component);\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"nav\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"ul\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"Home\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/create/accessory\",children:\"Create Accessory\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/generate/kat\",children:\"Create Kat\"})})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"c\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/generate/kat\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GenerateKat_GenerateKat,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/create/accessory\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CreateAccessory_CreateAccessory,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Home,{})})]})]})});}function Home(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Home\"});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/reportWebVitals.js\nvar reportWebVitals=function reportWebVitals(onPerfEntry){if(onPerfEntry&&onPerfEntry instanceof Function){__webpack_require__.e(/* import() */ 3).then(__webpack_require__.bind(null, 67)).then(function(_ref){var getCLS=_ref.getCLS,getFID=_ref.getFID,getFCP=_ref.getFCP,getLCP=_ref.getLCP,getTTFB=_ref.getTTFB;getCLS(onPerfEntry);getFID(onPerfEntry);getFCP(onPerfEntry);getLCP(onPerfEntry);getTTFB(onPerfEntry);});}};/* harmony default export */ var src_reportWebVitals = (reportWebVitals);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nsrc_reportWebVitals();\n\n/***/ })\n\n},[[66,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/node_modules/postcss-loader/src/index.js??postcss!/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/index.css","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/node_modules/postcss-loader/src/index.js??postcss!/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/App.css","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/util/accessory-helpers.js","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/util/dao.js","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/components/upload.js","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/routes/CreateAccessory.js","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/util/generator-helper.js","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/components/generate.js","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/routes/GenerateKat.js","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/App.js","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/reportWebVitals.js","/Users/josephmuruguru/go/src/github.com/kat-generator/KGF/src/index.js"],"names":["findPosition","obj","curleft","curtop","offsetParent","offsetLeft","offsetTop","x","y","undefined","rgbToHex","r","g","b","toString","buildEmptyMatrix","height","m","i","push","recordMappingMatrix","canvas","colorMatrix","context","getContext","index","w","h","p","getImageData","data","hex","slice","SERVER_URL_BASE","postAccessoryData","placement","subType","aData","url","window","confirm","axios","post","accessory","getKatData","get","response","console","log","status","Uploader","props","canvasRef","React","createRef","imgRef","state","file","imagePreviewUrl","colorMap","img","e","_handleFindPosition","mapping","matrix","current","forEach","row","setState","subtype","alert","target","value","preventDefault","ctx","pos","pageX","pageY","reader","FileReader","files","onloadstart","clearRect","onloadend","result","Image","onload","fillStyle","fillRect","drawImage","src","readAsDataURL","$imagePreview","_handleSubmit","_handleImageChange","_generateCanvas","_scanCanvas","_handleSubTypeChange","_handlePlacementChange","map","el","_saveAccessory","Component","CreateAccessory","applyColorPalette","palette","paletteMap","paletteCopy","colorMapping","currentRow","length","hasOwnProperty","Math","floor","random","rIndex","getRandomColorFromPalette","splice","applyColorMap","pMap","final","transformRow","getBackgroundColorMap","bg","mergeLayers","source","edit","start","j","redrawFromMatrix","canvasContext","Generator","Face","Accessories","Background","Merged","ImgData","then","face","background","aGroup","Object","keys","base","a","values","reduce","acc","curr","combo","imgData","toDataURL","_generateKat","GenerateKat","App","Home","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","export function findPosition(obj) {\n    let curleft = 0, curtop = 0;\n    if (obj.offsetParent) {\n        do {\n            curleft += obj.offsetLeft;\n            curtop += obj.offsetTop;\n        } while (obj = obj.offsetParent);\n        return { x: curleft, y: curtop };\n    }\n    return undefined;\n}\n\nexport function  rgbToHex(r,g,b) {\n    if (r > 255 || g > 255 || b > 255)\n        throw \"Invalid color component\";\n    return ((r << 16) | (g << 8) | b).toString(16);\n}\n\nfunction buildEmptyMatrix(height) {\n    var m = [];\n    for (var i = 0; i < height; i++) {\n        m.push([]);\n    }\n    return m\n}\n\nexport function recordMappingMatrix(canvas) {\n    let colorMatrix = buildEmptyMatrix(24);\n    let context = canvas.getContext('2d');\n    for (let height = 0; height < 24; height++ ){\n        for (let index = 0; index < 24; index++) {\n            let w = index * 10;\n            let h = height * 10\n\n            let p = context.getImageData(w, h, 9, 9).data;\n            let hex = \"#\" + (\"000000\" + rgbToHex(p[0], p[1], p[2])).slice(-6);\n            switch (hex) {\n                case \"#000000\":\n                    colorMatrix[height][index] = \"outline\";\n                    break;\n                case \"#ffffff\":\n                    colorMatrix[height][index] = \"empty\";\n                    break;\n                default:\n                    colorMatrix[height][index] = `color_${hex}`;\n                    break;\n            }\n        }\n    }\n    return colorMatrix;\n}","import axios from 'axios';\n\nconst SERVER_URL_BASE = \"\";\n\nexport function postAccessoryData (placement, subType, aData) {\n    const url = `${SERVER_URL_BASE}/accessory/create`\n    if (window.confirm(`Are you sure you eant to save this accessory as sub type ${subType} and placement ${placement}`)) {\n        axios.post(url,{\n            placement: placement,\n            subType: subType,\n            accessory: aData\n        });\n    }\n\n}\n\nexport async function getKatData () {\n    const url = `/api/generate/kat`;\n    const response = await axios.get(url);\n    console.log(\"generate cat response status\", response.status);\n    return response.data;\n}\n","import React from \"react\";\nimport {findPosition, rgbToHex, recordMappingMatrix} from \"../util/accessory-helpers\";\nimport {postAccessoryData} from \"../util/dao\";\n\nexport class Uploader extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvasRef = React.createRef();\n        this.imgRef = React.createRef();\n        this.state = {file: '', imagePreviewUrl: '', colorMap: {}, placement: '', subType: ''};\n    }\n\n    componentDidMount() {\n        const img = this.imgRef;\n    }\n\n    _generateCanvas() {\n        return (\n            <div>\n                <canvas\n                    onMouseMove={(e) => this._handleFindPosition(e)}\n                    ref={this.canvasRef} width={240} height={240} />\n            </div>\n        )\n    }\n\n    _scanCanvas() {\n        let canvas = this.canvasRef;\n        let mapping = {}\n        const matrix = recordMappingMatrix(canvas.current);\n        matrix.forEach((row, index) => {\n            mapping[index] = row;\n        })\n        this.setState({\n            colorMap: mapping\n        });\n        console.log(mapping);\n    }\n\n    _saveAccessory() {\n        if (this.state.placement !== \"\" && this.state.subtype !== \"\" && this.state.colorMap !== {}) {\n            postAccessoryData(this.state.placement, this.state.subType, this.state.colorMap)\n        } else {\n            alert(\"unable to save accessory plz review configuration\");\n        }\n\n    }\n\n\n\n    _handlePlacementChange(e) {\n        this.setState({\n            placement: e.target.value\n        })\n    }\n\n    _handleSubTypeChange(e) {\n        this.setState({\n            subType: e.target.value,\n        })\n    }\n\n    _handleSubmit(e) {\n        e.preventDefault();\n        // TODO: do something with -> this.state.file\n        console.log('handle uploading-', this.state.file);\n    }\n\n    _handleFindPosition(e) {\n        let canvas = this.canvasRef;\n        let ctx = canvas.current.getContext(\"2d\");\n        var pos = findPosition(canvas.current);\n        var x = e.pageX - pos.x;\n        var y = e.pageY - pos.y;\n        var p = ctx.getImageData(x, y, 10, 10).data;\n        var hex = \"#\" + (\"000000\" + rgbToHex(p[0], p[1], p[2])).slice(-6);\n        console.log(hex);\n    }\n\n    _handleImageChange(e) {\n        e.preventDefault();\n\n        let reader = new FileReader();\n        let file = e.target.files[0];\n        reader.onloadstart = (e) => {\n            let ctx = this.canvasRef.current.getContext(\"2d\");\n            ctx.clearRect(0, 0,240, 240);\n        }\n        reader.onloadend = (e) => {\n            this.setState({\n                file: file,\n                imagePreviewUrl: reader.result,\n                colorMap: {},\n                placement: \"\",\n                subType: \"\",\n            });\n\n            let i = new Image();\n            i.onload = (e) => {\n                let ctx = this.canvasRef.current.getContext(\"2d\");\n\n                ctx.fillStyle = 'white';\n                ctx.fillRect(0, 0, 240, 240);\n                ctx.drawImage(i, 0, 0, 240,240);\n            }\n            i.src = this.state.imagePreviewUrl;\n        }\n\n        reader.readAsDataURL(file)\n    }\n\n    render() {\n        let {imagePreviewUrl} = this.state;\n        let $imagePreview = null;\n        if (imagePreviewUrl) {\n\n            return (\n                <div className=\"previewComponent\">\n                    <form onSubmit={(e) => this._handleSubmit(e)}>\n                        <input className=\"fileInput\"\n                               type=\"file\"\n                               onChange={(e) => this._handleImageChange(e)}/>\n                    </form>\n                    <div className=\"imgPreview\">\n                        <img ref={this.imgRef} height={240} width={240} alt={\"img\"} src={imagePreviewUrl}/>\n                    </div>\n                    <br/>\n                    <h4>Canvas</h4>\n                    {this._generateCanvas()}\n                    <br/>\n                    <button onClick={() => this._scanCanvas()}>scan</button>\n                    <br />\n                    <form id=\"save-accessory\">\n                        <label>enter subtype</label>\n                        <input className={\"subtype-input\"} type={\"text\"} value={this.state.subType} onChange={(e) => this._handleSubTypeChange(e)} />\n                        <br />\n                        <label>choose placement</label>\n                        <select value={this.state.placement} onChange={(e) => this._handlePlacementChange(e)}>\n                            <option value=\"\">Select your option</option>\n                            {\n                                [\"top\", \"mid\", \"bottom\", \"custom\"].map((el, i) => {\n                                    return (<option value={el} key={`${i}_option`}>{el}</option>)\n                                })\n                            }\n                        </select>\n                    </form>\n                    <button onClick={(e) => this._saveAccessory(e)} >Save Accessory</button>\n                </div>\n            );\n        } else {\n            $imagePreview = (<div className=\"previewText\">Please select an Image for Preview</div>);\n            return (\n                <div className=\"previewComponent\">\n                    <form onSubmit={(e) => this._handleSubmit(e)}>\n                        <input className=\"fileInput\"\n                               type=\"file\"\n                               onChange={(e) => this._handleImageChange(e)}/>\n                    </form>\n                    <div className=\"imgPreview\">\n                        {$imagePreview}\n                    </div>\n                    <h4>Canvas</h4>\n                    {this._generateCanvas()}\n                </div>\n            );\n        }\n    }\n}\n","import React from \"react\";\nimport {Uploader} from \"../components/upload\";\n\nexport class CreateAccessory extends React.Component {\n    render() {\n        return ( <div>\n                <h1>Create Accessory</h1>\n                <Uploader></Uploader>\n            </div>\n        );\n\n    }\n}","export function applyColorPalette(mapping, palette) {\n    if (!mapping) {\n        return [];\n    }\n    let paletteMap = {};\n    paletteMap[\"empty\"] = \"#ffffff\";\n    paletteMap[\"outline\"] = \"#000000\";\n    let paletteCopy = palette;\n    let colorMapping = [];\n    for (let i = 0; i < 24; i++) {\n        const currentRow = mapping[i];\n        currentRow.forEach(el => {\n            if (!paletteCopy.length && !paletteMap.hasOwnProperty(el)) {\n                paletteMap[el] = `#${Math.floor(Math.random()*16777215).toString(16)}`;\n            }\n            if (paletteMap.hasOwnProperty(el)) {\n            } else {\n                let rIndex = getRandomColorFromPalette(paletteCopy)\n                paletteMap[el] = `#${paletteCopy[rIndex]}`;\n                paletteCopy.splice(rIndex, 1);\n            }\n        });\n    }\n    colorMapping = applyColorMap(mapping, paletteMap);\n    return colorMapping;\n}\n\nfunction getRandomColorFromPalette(palette) {\n    let length = palette.length;\n    return Math.floor(Math.random() * length);\n}\n\nfunction applyColorMap(map, pMap) {\n    let final = [];\n    for (let i = 0; i < 24; i++) {\n        let transformRow = map[i].map(el => {\n            return pMap[el];\n        })\n        final.push(transformRow);\n    }\n    return final\n}\n\nexport function getBackgroundColorMap(bg) {\n    const mapping = [];\n    for (let i = 0; i < 24; i++) {\n        mapping.push(bg[i])\n    }\n    return mapping;\n}\n\nexport function mergeLayers(source, edit) {\n    if (edit.length < 24) {\n        return source;\n    }\n    let start = source;\n    for (let index = 0; index < source.length; index++) {\n        for (let j = 0; j < source.length; j++) {\n            if (edit[index][j] == \"#ffffff\") {\n                continue;\n            } else {\n                start[index][j] = edit[index][j];\n            }\n        }\n    }\n    return start;\n}\n\nexport function redrawFromMatrix(colorMatrix, canvasContext) {\n    for (var height = 0; height < 24; height++ ){\n        for (let index = 0; index < 24; index++) {\n            if (colorMatrix[height][index] === \"#ffffff\") {\n                canvasContext.fillStyle = \"#ffffff\";\n            } else {\n                canvasContext.fillStyle = colorMatrix[height][index]\n            }\n            var w = index * 10;\n            var h = height * 10\n            canvasContext.fillRect(w, h, 10, 10);\n        }\n    }\n}","import React from 'react';\nimport {getKatData} from '../util/dao';\nimport {applyColorPalette, getBackgroundColorMap, redrawFromMatrix, mergeLayers} from '../util/generator-helper';\n\nexport class Generator extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvasRef = React.createRef();\n        this.state = {Face: {}, Accessories: {}, Background: {}, Merged: null, ImgData: null}\n    }\n    _generateKat (e) {\n        e.preventDefault();\n        const data = getKatData();\n        data.then(r => {\n            console.log(\"data in promise\", r);\n            this.setState({\n                Face: r[\"face\"],\n                Accessories: r[\"accessories\"],\n                Background: r[\"background\"]\n            });\n\n            const face = applyColorPalette(this.state.Face[\"face\"][\"Face\"],this.state.Face[\"palette\"][\"palette\"])\n            const background = getBackgroundColorMap(this.state.Background[\"background\"][\"Background\"])\n            const aGroup = {}\n            // console.log('state accessories', Object.keys(this.state.Accessories))\n            Object.keys(this.state.Accessories).forEach(placement => {\n                if (this.state.Accessories[placement]) {\n                    // console.log(this.state.Accessories[placement][\"accessory\"][\"accessory\"]);\n                    // console.log(this.state.Accessories[placement][\"palette\"][\"palette\"]);\n                    aGroup[placement] = applyColorPalette(this.state.Accessories[placement][\"accessory\"][\"accessory\"],this.state.Accessories[placement][\"palette\"][\"palette\"] )\n                }\n            });\n            // console.log(\"formatted accessories\", aGroup);\n            let base = mergeLayers(background, face);\n            let a = Object.values(aGroup).reduce((acc, curr) => {\n                return mergeLayers(acc, curr);\n            })\n            let combo = mergeLayers(base, a)\n            redrawFromMatrix(combo, this.canvasRef.current.getContext(\"2d\"));\n\n            let imgData = this.canvasRef.current.toDataURL(\"image/png\");\n            console.log(\"converted image data\", imgData);\n            this.setState({\n                Merged: combo,\n                ImgData: imgData\n            })\n        })\n    }\n\n    _generateCanvas() {\n        return (\n            <div>\n                <canvas ref={this.canvasRef} width={240} height={240} />\n            </div>\n        )\n    }\n\n    render () {\n        return (\n            <div>\n                <button onClick={(e) => this._generateKat(e)}>Generate Kat</button>\n                {this._generateCanvas()}\n                <br/>\n                {this.state.Merged && this.state.ImgData ? <a href={this.state.ImgData} download>Download Kat</a> : null}\n            </div>\n        )\n    }\n}","import React from \"react\";\nimport {Generator} from \"../components/generate\";\n\nexport class GenerateKat extends React.Component {\n    render() {\n        return ( <div>\n                <h1>Generate Kat</h1>\n                <Generator></Generator>\n            </div>\n        );\n\n    }\n}","import './App.css';\nimport React from \"react\"\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport {CreateAccessory} from \"./routes/CreateAccessory\";\nimport {GenerateKat} from \"./routes/GenerateKat\"\n\nfunction App() {\n  return (\n      <Router>\n        <div>\n          <nav>\n            <ul>\n              <li>\n                <Link to=\"/\">Home</Link>\n              </li>\n              <li>\n                <Link to=\"/create/accessory\">Create Accessory</Link>\n              </li>\n              <li>\n                <Link to=\"/generate/kat\">Create Kat</Link>\n              </li>\n            </ul>\n          </nav>\n\n          {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n          <Switch>\n            <Route path=\"/generate/kat\">\n              <GenerateKat />\n            </Route>\n            <Route path=\"/create/accessory\">\n              <CreateAccessory />\n            </Route>\n            <Route path=\"/\">\n              <Home />\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n  );\n}\nfunction Home() {\n  return <h2>Home</h2>;\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"]}}